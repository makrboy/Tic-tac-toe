<!DOCTYPE html>
<html>
<head>
  <title>Tic Tac Toe</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #223;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    
    #game-board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 10px;
    }
    
    .square {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 40px;
      width: 100px;
      height: 100px;
      background-color: #0f0;
      cursor: pointer;
    }
    
    #score-board {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 400px;
      margin-bottom: 20px;
    }
    
    #reset-button {
      font-size: 18px;
      padding: 10px 20px;
      background-color: #0f0;
      color: #000;
      border: none;
      cursor: pointer;
    }
    
    #turn-box {
      padding: 10px 20px;
      background-color: #0f0;
    }
    
    .ai-win {
      color: #f00;
    }
    
    @keyframes remove-player-pieces {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-200px); opacity: 0; }
    }
    
    .ai-piece {
      animation: remove-player-pieces 1s forwards;
    }
  </style>
</head>
<body>
  <div id="score-board">
    <div id="ai-score">AI: 0</div>
    <div id="reset-button">Reset</div>
    <div id="player-score">You: 0</div>
  </div>
  <div id="turn-box">Player's Turn</div>
  <div id="game-board"></div>
  
  <script>
    // Tic Tac Toe game logic
    const EMPTY = '';
    const PLAYER = 'X';
    const AI = 'O';
    
    const board = ['', '', '', '', '', '', '', '', ''];
    let currentPlayer = PLAYER;
    let gameOver = false;
    let aiScore = 0;
    let playerScore = 0;
    
    const squares = document.querySelectorAll('.square');
    const resetButton = document.querySelector('#reset-button');
    const aiScoreDisplay = document.querySelector('#ai-score');
    const playerScoreDisplay = document.querySelector('#player-score');
    const turnBox = document.querySelector('#turn-box');
    
    squares.forEach((square, index) => {
      square.addEventListener('click', () => {
        if (!gameOver && board[index] === EMPTY) {
          square.innerText = currentPlayer;
          board[index] = currentPlayer;
          square.classList.add('ai-piece');
          checkGameOver();
          switchTurn();
          if (!gameOver) {
            turnBox.innerText = "AI's Turn";
            setTimeout(makeAIMove, 500);
          }
        }
      });
    });
    
    resetButton.addEventListener('click', resetGame);
    
    function checkGameOver() {
      const winningCombinations = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
        [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
        [0, 4, 8], [2, 4, 6]              // Diagonals
      ];
    
      for (const combination of winningCombinations) {
        const [a, b, c] = combination;
        if (board[a] !== EMPTY && board[a] === board[b] && board[a] === board[c]) {
          gameOver = true;
          if (currentPlayer === AI) {
            aiScore++;
            aiScoreDisplay.innerText = `AI: ${aiScore}`;
            turnBox.innerText = 'AI Wins!';
          } else {
            playerScore++;
            playerScoreDisplay.innerText = `You: ${playerScore}`;
            turnBox.innerText = 'You Win!';
          }
          break;
        }
      }
    
      if (!gameOver && board.every(square => square !== EMPTY)) {
        gameOver = true;
        turnBox.innerText = 'Tie!';
        setTimeout(fillWithAIPieces, 2000);
      }
    }
    
    function switchTurn() {
      currentPlayer = currentPlayer === PLAYER ? AI : PLAYER;
    }
    
    function makeAIMove() {
      if (!gameOver) {
        const bestMove = getBestMove();
        const square = squares[bestMove];
        square.innerText = currentPlayer;
        board[bestMove] = currentPlayer;
        square.classList.add('ai-piece');
        checkGameOver();
        switchTurn();
        if (!gameOver) {
          turnBox.innerText = "Player's Turn";
        }
      }
    }
    
    function getBestMove() {
      let bestScore = -Infinity;
      let bestMove;
    
      for (let i = 0; i < 9; i++) {
        if (board[i] === EMPTY) {
          board[i] = currentPlayer;
          const score = minimax(board, 0, false);
          board[i] = EMPTY;
    
          if (score > bestScore) {
            bestScore = score;
            bestMove = i;
          }
        }
      }
    
      return bestMove;
    }
    
    function minimax(board, depth, isMaximizing) {
      const scores = {
        X: -1,
        O: 1,
        tie: 0
      };
    
      const result = checkGameOver();
    
      if (result !== null) {
        return scores[result];
      }
    
      if (isMaximizing) {
        let bestScore = -Infinity;
        for (let i = 0; i < 9; i++) {
          if (board[i] === EMPTY) {
            board[i] = AI;
            const score = minimax(board, depth + 1, false);
            board[i] = EMPTY;
            bestScore = Math.max(score, bestScore);
          }
        }
        return bestScore;
      } else {
        let bestScore = Infinity;
        for (let i = 0; i < 9; i++) {
          if (board[i] === EMPTY) {
            board[i] = PLAYER;
            const score = minimax(board, depth + 1, true);
            board[i] = EMPTY;
            bestScore = Math.min(score, bestScore);
          }
        }
        return bestScore;
      }
    }
    
    function fillWithAIPieces() {
      squares.forEach((square, index) => {
        if (board[index] === EMPTY) {
          square.innerText = AI;
          board[index] = AI;
        }
      });
      turnBox.innerText = 'AI Wins!';
    }
    
    function resetGame() {
      squares.forEach(square => {
        square.innerText = '';
        square.classList.remove('ai-piece');
      });
      board.fill(EMPTY);
      currentPlayer = PLAYER;
      gameOver = false;
      turnBox.innerText = "Player's Turn";
    }
  </script>
</body>
</html>
